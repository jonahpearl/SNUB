<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <meta name="generator" content="sphinx-4.4.0, furo 2022.01.02"/>
        <title>snub.gui.main - snub documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=df49af52631e7917044a9c21a57f7b83170a6dd0" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=fade93df149f7c5fedb3ff897f799dc7d283b420" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">snub  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">snub  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage.html">Interface</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for snub.gui.main</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">cv2</span><span class="o">,</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">snub.gui.utils</span> <span class="kn">import</span> <span class="n">SelectionIntervals</span><span class="p">,</span> <span class="n">CheckBox</span>
<span class="kn">from</span> <span class="nn">snub.gui.stacks</span> <span class="kn">import</span> <span class="n">PanelStack</span><span class="p">,</span> <span class="n">TrackStack</span>




<span class="k">def</span> <span class="nf">set_style</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="c1"># https://www.wenzhaodesign.com/devblog/python-pyside2-simple-dark-theme</span>
    <span class="c1"># button from here https://github.com/persepolisdm/persepolis/blob/master/persepolis/gui/palettes.py</span>
    <span class="n">app</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">QStyleFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">"Fusion"</span><span class="p">))</span>

    <span class="n">darktheme</span> <span class="o">=</span> <span class="n">QPalette</span><span class="p">()</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Window</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">WindowText</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Button</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">ButtonText</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">AlternateBase</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">))</span>
    <span class="c1"># darktheme.setColor(QPalette.AlternateBase, QColor(0, 222, 0))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">ToolTipBase</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">,</span> <span class="mi">222</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Highlight</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">45</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Disabled</span><span class="p">,</span> <span class="n">QPalette</span><span class="o">.</span><span class="n">Light</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Disabled</span><span class="p">,</span> <span class="n">QPalette</span><span class="o">.</span><span class="n">Shadow</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Disabled</span><span class="p">,</span> <span class="n">QPalette</span><span class="o">.</span><span class="n">ButtonText</span><span class="p">,</span>
                       <span class="n">QColor</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="mi">111</span><span class="p">,</span> <span class="mi">111</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Disabled</span><span class="p">,</span> <span class="n">QPalette</span><span class="o">.</span><span class="n">Text</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">122</span><span class="p">,</span> <span class="mi">118</span><span class="p">,</span> <span class="mi">113</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Disabled</span><span class="p">,</span> <span class="n">QPalette</span><span class="o">.</span><span class="n">WindowText</span><span class="p">,</span>
                       <span class="n">QColor</span><span class="p">(</span><span class="mi">122</span><span class="p">,</span> <span class="mi">118</span><span class="p">,</span> <span class="mi">113</span><span class="p">))</span>
    <span class="n">darktheme</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">QPalette</span><span class="o">.</span><span class="n">Disabled</span><span class="p">,</span> <span class="n">QPalette</span><span class="o">.</span><span class="n">Base</span><span class="p">,</span> <span class="n">QColor</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">32</span><span class="p">))</span>
    <span class="n">app</span><span class="o">.</span><span class="n">setPalette</span><span class="p">(</span><span class="n">darktheme</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">app</span>



<div class="viewcode-block" id="ProjectTab"><a class="viewcode-back" href="../../../api.html#snub.gui.main.ProjectTab">[docs]</a><span class="k">class</span> <span class="nc">ProjectTab</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Return the most important thing about a person.</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    your_name</span>
<span class="sd">        A string indicating the name of the person.</span>
<span class="sd">    """</span>
    <span class="n">new_current_position</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_directory</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="c1"># load config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">project_directory</span> <span class="o">=</span> <span class="n">project_directory</span>
        <span class="n">config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">project_directory</span><span class="p">,</span><span class="s1">'config.json'</span><span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span><span class="s1">'r'</span><span class="p">))</span>
        <span class="n">config</span><span class="p">,</span><span class="n">error_messages</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_and_autofill_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">error_messages</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">config_error</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">error_messages</span><span class="p">)</span>
            <span class="k">return</span>
            <span class="c1">#self.close_tab()</span>
  
        <span class="c1"># initialize state variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playing</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'bounds'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout_mode</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'layout_mode'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'current_time'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_speed</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'initial_playspeed'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">animation_step</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'animation_step'</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track_playhead</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">'track_playhead'</span><span class="p">]</span>

        <span class="c1"># keep track of current selection</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_intervals</span> <span class="o">=</span> <span class="n">SelectionIntervals</span><span class="p">(</span><span class="n">timestep</span><span class="o">=</span><span class="n">config</span><span class="p">[</span><span class="s1">'timestep'</span><span class="p">])</span>
        
        <span class="c1"># create major gui elements</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panelStack</span> <span class="o">=</span> <span class="n">PanelStack</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_intervals</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">[</span><span class="s1">'panel_props'</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span> <span class="o">=</span> <span class="n">TrackStack</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_intervals</span><span class="p">,</span> <span class="o">**</span><span class="n">config</span><span class="p">[</span><span class="s1">'track_props'</span><span class="p">])</span>

        <span class="c1"># timer for live play</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># controls along bottom row</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span> <span class="o">=</span> <span class="n">QSlider</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track_playhead_checkbox</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_playhead</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track_playhead_checkbox</span><span class="o">.</span><span class="n">state_change</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_track_playhead</span><span class="p">)</span>

        <span class="c1"># connect signals and slots</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">valueChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_play_speed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_play_state</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">new_current_time</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_current_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">selection_change</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_selected_intervals</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">panel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">panelStack</span><span class="o">.</span><span class="n">widgets</span><span class="p">:</span> 
            <span class="n">panel</span><span class="o">.</span><span class="n">new_current_time</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_current_time</span><span class="p">)</span>
            <span class="n">panel</span><span class="o">.</span><span class="n">selection_change</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_selected_intervals</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">increment_current_time</span><span class="p">)</span>

        <span class="c1"># initialize layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">update_current_range</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_current_time</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_time</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span> <span class="o">=</span> <span class="n">QSplitter</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">panelStack</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">play_icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span><span class="s1">'icons'</span><span class="p">,</span><span class="s1">'play.png'</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pause_icon</span> <span class="o">=</span> <span class="n">QIcon</span><span class="p">(</span><span class="n">QPixmap</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span><span class="s1">'icons'</span><span class="p">,</span><span class="s1">'pause.png'</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">play_icon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_button</span><span class="o">.</span><span class="n">setIconSize</span><span class="p">(</span><span class="n">QSize</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">12</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">speed_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1">X'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">play_speed</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_label</span><span class="o">.</span><span class="n">setMinimumWidth</span><span class="p">(</span><span class="mi">35</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">setMinimum</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">setMaximum</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">setTickPosition</span><span class="p">(</span><span class="n">QSlider</span><span class="o">.</span><span class="n">TicksBothSides</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">setTickInterval</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="o">.</span><span class="n">setMaximumWidth</span><span class="p">(</span><span class="mi">150</span><span class="p">)</span>

        <span class="n">buttons</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">play_button</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addSpacing</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s1">'Playback Speed:'</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">speed_slider</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">speed_label</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addSpacing</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">track_playhead_checkbox</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s1">'Track Playhead'</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">setFixedHeight</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">buttons</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_layout_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layout_mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_track_playhead</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checkstate</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">track_playhead</span> <span class="o">=</span> <span class="n">checkstate</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_playhead</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">center_at_time</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_time</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_and_autofill_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">config</span><span class="p">):</span>
        <span class="n">error_messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">'bounds'</span><span class="p">]:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span>
                <span class="n">error_messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'config is missing the key "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>

        <span class="n">config</span><span class="p">[</span><span class="s1">'project_directory'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_directory</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'layout_mode'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'layout_mode'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'columns'</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'timestep'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'timestep'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">30</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'current_time'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'current_time'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'initial_playspeed'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'initial_playspeed'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'animation_step'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'animation_step'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">30</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'track_playhead'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'track_playhead'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'track_props'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'track_props'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'panel_props'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'panel_props'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'spike_rasters'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'spike_rasters'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'scatters'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'scatters'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'rasters'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'rasters'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'videos'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'videos'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'meshes'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'meshes'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s1">'vlines'</span> <span class="ow">in</span> <span class="n">config</span><span class="p">:</span> <span class="n">config</span><span class="p">[</span><span class="s1">'vlines'</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">widget_name</span><span class="p">,</span> <span class="n">requred_keys</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="s1">'rasters'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'data_path'</span><span class="p">,</span> <span class="s1">'binsize'</span><span class="p">],</span>
            <span class="s1">'videos'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'video_path'</span><span class="p">,</span> <span class="s1">'timestamps_path'</span><span class="p">],</span>
            <span class="s1">'meshes'</span><span class="p">:</span> <span class="p">[</span><span class="s1">'data_path'</span><span class="p">,</span> <span class="s1">'faces_path'</span><span class="p">,</span> <span class="s1">'timestamps_path'</span><span class="p">]</span>
        <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">props</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="n">widget_name</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">requred_keys</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">props</span><span class="p">:</span>
                        <span class="n">error_messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1"> is missing the key "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">widget_name</span><span class="p">,</span><span class="n">k</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">config</span><span class="p">,</span> <span class="n">error_messages</span>


    <span class="k">def</span> <span class="nf">config_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_path</span><span class="p">,</span> <span class="n">error_messages</span><span class="p">):</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s1">'The following config file is incomplete'</span><span class="p">)</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s1">'   '</span><span class="o">+</span><span class="n">config_path</span><span class="p">)</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s1">'&lt;html&gt;&lt;ul&gt;&lt;li&gt;'</span><span class="o">+</span><span class="s1">'&lt;/li&gt;&lt;li&gt;'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">error_messages</span><span class="p">)</span><span class="o">+</span><span class="s1">'&lt;/li&gt;&lt;/ul&gt;&lt;/html&gt;'</span><span class="p">)</span>

        <span class="n">title</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span> <span class="s2">"Arial"</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="n">QFont</span><span class="o">.</span><span class="n">Bold</span><span class="p">))</span>
        <span class="n">font</span> <span class="o">=</span> <span class="n">QFont</span><span class="p">(</span> <span class="s2">"Arial"</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="n">font</span><span class="o">.</span><span class="n">setItalic</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">path</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">QFont</span><span class="p">(</span> <span class="s2">"Arial"</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>

        <span class="n">text_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">text_layout</span><span class="o">.</span><span class="n">setSpacing</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">text_layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">text_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
        <span class="n">text_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">text_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span>
        <span class="n">text_layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">text_layout</span><span class="p">);</span> 
        <span class="n">layout</span><span class="o">.</span><span class="n">addStretch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">change_layout_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout_mode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">setOrientation</span><span class="p">({</span><span class="s1">'columns'</span><span class="p">:</span><span class="n">Qt</span><span class="o">.</span><span class="n">Horizontal</span><span class="p">,</span> <span class="s1">'rows'</span><span class="p">:</span><span class="n">Qt</span><span class="o">.</span><span class="n">Vertical</span><span class="p">}[</span><span class="n">layout_mode</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panelStack</span><span class="o">.</span><span class="n">change_layout_mode</span><span class="p">(</span><span class="n">layout_mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">change_layout_mode</span><span class="p">(</span><span class="n">layout_mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">change_play_speed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">log2_speed</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_speed</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="n">log2_speed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">speed_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s1">'</span><span class="si">{}</span><span class="s1">X'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">play_speed</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">deselect_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_selected_intervals</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">],</span> <span class="p">[</span><span class="kc">False</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">update_selected_intervals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">intervals</span><span class="p">,</span> <span class="n">is_selected</span><span class="p">):</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">),</span><span class="n">sel</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">intervals</span><span class="p">,</span> <span class="n">is_selected</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">sel</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_intervals</span><span class="o">.</span><span class="n">add_interval</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_intervals</span><span class="o">.</span><span class="n">remove_interval</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">update_selected_intervals</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panelStack</span><span class="o">.</span><span class="n">update_selected_intervals</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">update_current_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">current_time</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">=</span> <span class="n">current_time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">update_current_time</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">panelStack</span><span class="o">.</span><span class="n">update_current_time</span><span class="p">(</span><span class="n">current_time</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">increment_current_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">new_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">play_speed</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">animation_step</span>
        <span class="k">if</span> <span class="n">new_time</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">new_time</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_current_time</span><span class="p">(</span><span class="n">new_time</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">track_playhead</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">trackStack</span><span class="o">.</span><span class="n">center_at_time</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_time</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">toggle_play_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">playing</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">1000</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">animation_step</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pause_icon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playing</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">pause</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">play_button</span><span class="o">.</span><span class="n">setIcon</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">play_icon</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">playing</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="MainWindow"><a class="viewcode-back" href="../../../api.html#snub.gui.main.MainWindow">[docs]</a><span class="k">class</span> <span class="nc">MainWindow</span><span class="p">(</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="sd">'''</span>
<span class="sd">    Main window that contains menu bar and tab widget. Contains methods for</span>
<span class="sd">    opening, reloading, and closing project tabs.</span>
<span class="sd">    '''</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span> <span class="o">=</span> <span class="n">QTabWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setTabsClosable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">tabCloseRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">close_tab</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tab_changed</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">'Systems Neuro Browser'</span><span class="p">)</span>

        <span class="n">open_project</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">"&amp;Open Project"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">open_project</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s2">"Ctrl+O"</span><span class="p">)</span>
        <span class="n">open_project</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">open_project</span><span class="p">)</span>

        <span class="n">reload_data</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">"&amp;Reload Data"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">reload_data</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s2">"Ctrl+R"</span><span class="p">)</span>
        <span class="n">reload_data</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reload_data</span><span class="p">)</span>

        <span class="n">deselect_all</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">"&amp;Deselect All"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">deselect_all</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deselect_all</span><span class="p">)</span>
        
        <span class="n">save_layout</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">"&amp;Layout"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">save_layout</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_rows</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">"&amp;Rows"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_cols</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s2">"&amp;Columns"</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_rows</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_cols</span><span class="o">.</span><span class="n">setCheckable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_rows</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_layout_mode</span><span class="p">,</span><span class="s1">'rows'</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_cols</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">change_layout_mode</span><span class="p">,</span><span class="s1">'columns'</span><span class="p">))</span>

        <span class="n">mainMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuBar</span><span class="p">()</span>
        <span class="n">mainMenu</span><span class="o">.</span><span class="n">setNativeMenuBar</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">fileMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">'&amp;File'</span><span class="p">)</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">open_project</span><span class="p">)</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">reload_data</span><span class="p">)</span>

        <span class="n">editMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">'&amp;Edit'</span><span class="p">)</span>
        <span class="n">editMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">deselect_all</span><span class="p">)</span>

        <span class="c1">#saveMenu = fileMenu.addMenu('&amp;Save...')</span>
        <span class="c1">#saveMenu.addAction(save_layout)</span>

        <span class="n">windowMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">'&amp;Window'</span><span class="p">)</span>
        <span class="n">layoutMenu</span> <span class="o">=</span> <span class="n">windowMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">'&amp;Layout...'</span><span class="p">)</span>
        <span class="n">layoutMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_cols</span><span class="p">)</span>
        <span class="n">layoutMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_rows</span><span class="p">)</span>


        <span class="c1"># try to open projects that are passed as command line arguments</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">a</span><span class="p">):</span> 
                <span class="bp">self</span><span class="o">.</span><span class="n">load_project</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">deselect_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">currentWidget</span><span class="p">()</span><span class="o">.</span><span class="n">deselect_all</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">change_layout_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout_mode</span><span class="p">):</span>
        <span class="n">current_tab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">currentWidget</span><span class="p">()</span>
        <span class="n">current_tab</span><span class="o">.</span><span class="n">change_layout_mode</span><span class="p">(</span><span class="n">layout_mode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_cols</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">layout_mode</span> <span class="o">==</span> <span class="s1">'columns'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_rows</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">layout_mode</span> <span class="o">==</span> <span class="s1">'rows'</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">tab_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">current_tab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_cols</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">current_tab</span><span class="o">.</span><span class="n">layout_mode</span> <span class="o">==</span> <span class="s1">'columns'</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_layout_to_rows</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">current_tab</span><span class="o">.</span><span class="n">layout_mode</span> <span class="o">==</span> <span class="s1">'rows'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close_tab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">open_project</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">project_directories</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getExistingDirectories</span><span class="p">()</span>
        <span class="n">error_directories</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">project_dir</span> <span class="ow">in</span> <span class="n">project_directories</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">project_dir</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">project_dir</span><span class="p">,</span><span class="s1">'config.json'</span><span class="p">)):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">load_project</span><span class="p">(</span><span class="n">project_dir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> <span class="n">error_directories</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">project_dir</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">error_directories</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">about</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'</span><span class="se">\n\n</span><span class="s1">'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span><span class="s1">'The following directories lack a config file.'</span><span class="p">]</span><span class="o">+</span><span class="n">error_directories</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">reload_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">current_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">currentIndex</span><span class="p">()</span>
        <span class="n">current_tab</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">currentWidget</span><span class="p">()</span>
        <span class="n">project_dir</span> <span class="o">=</span> <span class="n">current_tab</span><span class="o">.</span><span class="n">project_directory</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">close_tab</span><span class="p">(</span><span class="n">current_index</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_project</span><span class="p">(</span><span class="n">project_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_layout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'save'</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">load_project</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">project_directory</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">project_directory</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">project_tab</span> <span class="o">=</span> <span class="n">ProjectTab</span><span class="p">(</span><span class="n">project_directory</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">project_tab</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabs</span><span class="o">.</span><span class="n">setCurrentWidget</span><span class="p">(</span><span class="n">project_tab</span><span class="p">)</span>

<div class="viewcode-block" id="MainWindow.getExistingDirectories"><a class="viewcode-back" href="../../../api.html#snub.gui.main.MainWindow.getExistingDirectories">[docs]</a>    <span class="k">def</span> <span class="nf">getExistingDirectories</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Workaround for selecting multiple directories</span>
<span class="sd">        adopted from http://www.qtcentre.org/threads/34226-QFileDialog-select-multiple-directories?p=158482#post158482</span>
<span class="sd">        This also give control about hidden folders</span>
<span class="sd">        """</span>
        <span class="n">dlg</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">DontUseNativeDialog</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">HideNameFilterDetails</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setFileMode</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">Directory</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setOption</span><span class="p">(</span><span class="n">dlg</span><span class="o">.</span><span class="n">ShowDirsOnly</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">QListView</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">ExtendedSelection</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">findChildren</span><span class="p">(</span><span class="n">QTreeView</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">setSelectionMode</span><span class="p">(</span><span class="n">QAbstractItemView</span><span class="o">.</span><span class="n">ExtendedSelection</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span> <span class="o">==</span> <span class="n">QDialog</span><span class="o">.</span><span class="n">Accepted</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">dlg</span><span class="o">.</span><span class="n">selectedFiles</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span><span class="nb">str</span><span class="p">(),</span> <span class="p">]</span></div></div>


<span class="k">def</span> <span class="nf">run</span><span class="p">():</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">set_style</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="n">icon_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span><span class="s1">'icons'</span><span class="p">,</span><span class="s1">'app_icon.png'</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">(</span><span class="n">icon_path</span><span class="p">))</span>

    <span class="n">window</span> <span class="o">=</span> <span class="n">MainWindow</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="n">window</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">900</span><span class="p">)</span>

    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">run</span><span class="p">()</span>




</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>

        <div class="related-information">
              Copyright &#169; 2022, Caleb Weinreb |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    </body>
</html>